访问链：

处理嵌套函数调用：

记录 **访问链**：一个嵌套的函数 $f$ 肯定有一个父作用域函数 $F$ ，在函数 $f$ 运行时，栈上有至少一个 $F$ 的运行实例，将 $f$ 的访问链指向最新的这次 $F$ 的运行，这样在 $f$ 中使用的 $F$ 中符号就可以引用到最新的这次 $F$ 的运行。（注意不是记录调用 $f$ 的函数，因为调用可以跨嵌套层级）

访问链需要在运行时记录，假设 $q$ 函数调用了 $p$ 函数
- $\text{depth}(p)>\text{depth}(q)$，则 $p$ 直接在 $q$ 中定义，$p$ 的访问链指向 $q$ 
- $\text{depth}(p)=\text{depth}(q)$，则 $p=q$ 或同级，$p$ 访问链指向 $q$ 的访问链
- $\text{depth}(p)<\text{depth}(q)$，则 $p$ 在某函数 $r$ 中被定义，$q$ 也包含在 $r$ 内，此时指向 $r$ 。

2 和 3 其实性质相同，都是沿访问链向上 $n_{q}-n_{p}+1$步。

对于函数参数，调用者负责维护访问链并将其与函数地址一起放入参数内

---

显示表：

访问链维护每一个函数自己的最新父函数在栈中的位置，如果想要找嵌套了多层的非局部数据，需要沿访问链找多次。但注意：每次查找访问链都会使嵌套深度-1，那么其实根据嵌套深度就能找到对应的函数。

引入 **显示表**：维护当前每一个嵌套深度最新运行的函数。如果函数 $p$ 想访问 多级父函数 $q$ 的符号，只需要在 $p$ 运行时查找显示表的 $n_{q}$ 项即可。