## 属性

> [!def] 语法制导定义, Syntax-Directed Definition, SDD
> 上下文无关文法 + 属性和规则

> [!def] 继承属性和综合属性
> 综合属性：只能由 $N$ 的子节点或 $N$ 本身的属性值确定
> 继承属性：从 $N$ 的父节点、本身和兄弟节点属性值确定，不能从子节点属性值定义（实际上这个是约定，因为就算可以从子节点属性值定义，这些属性值也是综合属性，可以综合到节点 $N$ 上，然后就不需要从子节点定义了）

> [!warning]
> 终结符号可以有综合属性，但是不能有继承属性

只包含综合属性的 SDD: S属性SDD

没有副作用的SDD：属性文法

> [!Warning]
> 对于同时有继承/综合属性的SDD，不能保证有一个顺序来求值

依赖图：dag，从依赖项指向生成项

---

> [!def] S属性和L属性
> - 一个 SDD 是 $S$ 的，如果它的所有属性都是综合属性
> - 一个 SDD 是 $L$ 的，如果所有属性满足下列其一：
> 	- 是综合属性
> 	- 是继承属性，且满足以下性质
> 	  若存在产生式 $A\to X_{1}X_{2}\dots X_{n}$，对于继承属性 $X_{i}.a$，它只能使用：
> 		- $A$ 的继承属性
> 		- $X_{i}$ 左边的符号的继承/综合属性
> 		- $X_{i}$ 本身的继承/综合属性，但 $X_{i}$ 全部属性中不存在依赖环。

---

## 翻译方案

> [!def] 语法制导翻译方案，Syntax-Directed Translation Scheme
> 嵌入了程序片段的上下文无关文法

构造 SDT 的过程：

LR 文法 $\to$ S属性 SDD $\to$ SDT
LL 文法 $\to$ L属性 SDD $\to$ SDT

### 后缀SDT

后缀 SDT：适用于 S属性 SDD，跟LR 分析同步进行，规约一下做一下对应的动作

### 内部带有语义动作的SDT

对于内部带有语义动作的 SDT，对于产生式 $B\to X\{ a \}Y$
- 自底向上：那么在 $X$ 的此次出现位于栈顶后，立即执行动作 a
- 自顶向下：在展开 $Y$ 之前（$Y$ 是非终结符）或者匹配 $Y$ （Y是终结符）之前执行动作 a

> [!theorem] 可以在语法分析过程中实现的 SDT
> 可以在语法分析过程中实现的SDT可以按如下方式识别：将每一个内嵌的语义动作替换为独有的标记非终结符号，每个标记符号只有一个产生式 $M\to \varepsilon$，如果带有标记非终结符号的文法可以使用某个方法进行语法分析，那么这个SDT就可以在语法分析过程中实现

无法实现的 SDT 的例子

```
L -> E n
E -> {print('+)} E_1 + T
E -> T
T -> {print('*')} T_1 * F
T -> F
F -> ( E )
F -> digit {print(digit.lexval)}
```

无法在 LtoR 的扫描过程中确定符号是 + 还是 \*。

