BLEU（Bilingual Evaluation Understudy）是一种用于评估机器翻译质量的自动评价指标，其核心思想是通过比较机器翻译结果与人工参考译文的相似度来打分。以下是关于BLEU 1-4的解释及其基础知识的复习：

---

### **BLEU中的1-4是什么？**
BLEU中的 **1-4** 表示在计算时考虑的 **n-gram 的阶数**（即连续的单词组合长度）。具体来说：
- **BLEU-1**：只考虑 **1-gram（单个词）** 的匹配程度。
- **BLEU-2**：同时考虑 **1-gram 和 2-gram（相邻两个词）** 的匹配。
- **BLEU-3**：扩展到 **1-gram、2-gram 和 3-gram**。
- **BLEU-4**：综合 **1-gram 到 4-gram** 的匹配程度。

默认情况下，**BLEU 分数通常指 BLEU-4**（即综合 1-4 gram 的结果），但也可单独分析不同阶数的表现。

---

### **BLEU的基础原理**
#### 1. **修正的n-gram精度（Modified Precision）**
   - 传统精度（词匹配比例）的问题：如果机器翻译重复出现某个正确词，会被高估。
   - **修正方法**：对每个n-gram，统计其在机器翻译中出现的次数，但不超过参考译文中该n-gram的最大出现次数。
   
   例如：
   - 参考译文：`The cat is on the mat.`
   - 机器翻译：`The the the the.`
   - 修正后的1-gram精度：`the` 在参考译文中最多出现2次，机器翻译出现4次 → 精度为 `2/4 = 0.5`。

#### 2. **Brevity Penalty（简短惩罚）**
   - 问题：过短的翻译可能通过高精度“作弊”。
   - **解决方法**：如果机器翻译长度（\(c\)）小于参考译文最短长度（\(r\)），则施加惩罚：
     $$
     BP = \begin{cases}
     1 & \text{if } c > r, \\
     e^{(1 - r/c)} & \text{if } c \leq r.
     \end{cases}
     $$

#### 3. **综合多个n-gram的分数**
   - 对每个n-gram（1-4）计算修正精度 \(p_n\)。
   - 取几何平均并加权（通常权重相等，即 \(w_n = 1/4\)）：
     $$
     BLEU = BP \cdot \exp\left(\sum_{n=1}^4 w_n \log p_n\right).
     $$

---

### **BLEU的优缺点**
- **优点**：
  - 快速、客观，适合大规模评估。
  - 多n-gram结合能捕捉局部词序和短语匹配。
- **缺点**：
  - 忽略语法和语义合理性。
  - 对同义词、意译不敏感。
  - 过度依赖参考译文的质量和数量。

---

### **示例计算（简化版）**
假设：
- 机器翻译：`The cat is on the mat.`
- 参考译文：`The cat is sitting on the mat.`

1. **1-gram精度**：6个词中有6个匹配 → \(p_1 = 6/6 = 1.0\)  
2. **2-gram精度**：5个2-gram中，`the cat`, `cat is`, `is on`, `on the`, `the mat`，参考译文中缺少`is on` → \(p_2 = 4/5 = 0.8\)  
3. 类似地计算3-gram、4-gram精度，最终结合BP计算BLEU-4。

---

### **总结**
BLEU通过多阶n-gram的修正精度和简短惩罚，量化机器翻译与参考译文的相似性。1-4表示从单词到短语的匹配粒度，越高阶的n-gram越能捕捉局部结构的准确性，但也越严格。实际应用中需结合人工评估综合判断质量。