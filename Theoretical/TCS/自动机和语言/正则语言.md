## 正则语言和正则表达式

> [!def] 正则语言
> 如果一个语言被[[有穷自动机]]识别，则称它是正则语言

> [!def] 正则运算
> 并：$A \cup B=\{ x|x \in A \text{ or } x \in B\}$
> 连接：$A \circ B=\{ xy|x \in A, y \in B \}$
> 星：$A^*=\{ x_{1}x_{2}\cdots x_{k}| k\geq 0,x_{i} \in A \}$

> [!theorem]
> 正则语言类在正则运算下封闭

> [!proof] 
> 设两语言分为为$A_{1}$,$A_{2}$
> - 并：构造状态集 $Q=Q_{1}\times Q_{2}$，同时表示识别两语言的自动机的状态，只要有一个接受就整体接受。也可以使用非确定性有穷自动机，$\varepsilon$ 转移猜想串属于哪一个语言
> - 连接：设 NFA $N_{1},N_{2}$ 分别识别 $A_{1},A_{2}$，在$N_{1}$ 的接受状态增加一个$\varepsilon$ 转移，非确定性地进入$N_{2}$
> - 星：在识别 $A$ 的 NFA $N$ 上添加新起始状态（接受），然后添加所有原接受状态到新起始状态的$\varepsilon$转移和新起始状态到原起始状态的$\varepsilon$转移

> [!def] 正则表达式
> $R$ 是一个正则表达式，如果 $R$ 是
> - $a, a \in \Sigma$
> - $\varepsilon$
> - $\varnothing$
> - $(R_{1} \cup R_{2})$
> - $(R_{1} \circ R_{2})$
> - $(R_{1}^*)$

> [!caution]
> 正则表达式 $\varepsilon$ 和 $\varnothing$ 不同：$\varepsilon$ 表示只含空串的语言，$\varnothing$ 表示不含任何串的语言
> $R \cup \varnothing=R$
> $R \circ \varepsilon=R$
> $R \cup \varepsilon$ 可能不等于 $R$.
> $R \circ \varepsilon$ 可能不等于 $R$, e.g.$R=0,L(R)=0,L(R \circ \varnothing)=\varnothing$

$R^+=R R^*$

> [!theorem]
> 一个语言是正则的，当且仅当它能用正则表达式描述

> [!proof]
> 正则表达式和NFA之间的转换：
> 表达式 $\implies$ NFA：
> 使用三类正则运算将识别简单字符的 NFA 组合
> NFA $\implies$ 表达式：
> 引入 GNFA:
> > [!def] GNFA
> > GNFA类似 NFA，只是转移箭头可以用正则表达式表示
> > 起始状态有射到其他每一个状态的箭头，但是没有射入箭头
> > 有唯一的一个接受状态，其有从每一个状态射入的箭头，但没有射出箭头
> > 除起始状态和接受状态外，每一个状态到自身和其他每一个状态都有一个箭头
> 
> 先将 NFA 转换为 DFA，然后转换为这种 GNFA，然后开始化简 GNFA。
> 对于大于 2 状态的 GNFA，选取任意一个非起始接受状态，设这个状态为 $q_{\text{rip}}$，对于任意的两个其他状态 $q_{i},q_{j}$，若有 
> $q_{i}\stackrel {\text{R}_{4}}{\implies} q_{j}$
> $q_{i} \stackrel{R_{1}}{\implies} q_{\text{rip}}\stackrel{R_{2}}{\implies}q_{\text{rip}}\stackrel{R_{3}}{\implies} q_{j}$，
> 则删去 $q_{\text{rip}}$，构造 $q_{i}\implies q_{j}$ 的转移 $(R_{1})(R_{2})^*(R_{3}) \cup (R_{4})$
> 

## 泵引理

> [!theorem] 泵引理
> 若 A 是正则语言，则存在数 $p$ 使得如果 $s$ 是 A 中任一长度不小于 $p$ 的字符串，那么 $s$ 可以被分成 3 段，$s=xyz$ 使得
> - $\lvert y \rvert\geq 0$
> - $\lvert xy \rvert\leq p$
> - $\forall i\geq 0,x y^i z \in A$

> [!proof]
> 设 $M=(Q,\Sigma,\delta,q_{0},F)$ 识别 $A$，令泵长度等于 $M$ 的状态数，对于不小于 $p$ 长度的串，状态至少有 $p+1$个，从中选取相同的两个状态 $q_{i}$ 和 $q_{j}$ ，将串分为 3 段，重复中间段即可

> [!example]
> 证明 $A=0^n1^n$ 不是正则的
> 反证法，设是正则，则存在泵长度 $p$，对于串 $0^p 1^p$，前两条满足则 $y$ 全 0，不满足第三条

## Myhill-Nerode 定理

> [!def] 可区分性
> 对于 $\Sigma$ 上的语言 $L$ 和两个$\Sigma$上的串 $x,y$
> 如果 $\exists z$ 使得 $xz$ 和 $yz$ 恰好一个是 $L$ 的成员，则称 $x,y$ 用 $L$ 可区分

> [!def] 等价关系 $\equiv_{L}$
> $x\equiv_{L} y$: $x$ 和 $y$ 不可用 $L$ 区分
> $[x]_{L}$ 是 $x$ 所在的等价类

> [!def] 指数
> 集合 $\{ [x]_{L}|x \in \Sigma^* \}$ 的元素个数是 $L$ 的指数，可能有穷，可能无穷

> [!theorem] Myhill-Nerode
> $L$ 是 $\Sigma^*$ 上的正则语言，当且仅当 $L$ 指数有穷

> [!proof]
> 必要性：设 DFA $D=(Q,\Sigma,\delta,q_{0},F)$ 识别 $L$，建立 $\Sigma^*$ 到 $Q$ 的映射 
> $$ \begin{cases} f(\varepsilon)=q_{0} \\ f(\omega a)=\delta(f(\omega),a) \end{cases} $$
> 设 $x\simeq y$ 表示 $f(x)=f(y)$，则 $\simeq$ 等价类数量不超过 $Q$ 状态数，而 $x\simeq y$ 蕴含 $x\equiv_{L}y$，所以 $L$ 指数有穷
> 充分性：构造 DFA $M=(Q,\Sigma,\delta,q_{0},F)$ ，其中
> - $Q:\{ [x]_{L}|x \in \Sigma^* \}$
> - $\delta([x]_{L},a)=[xa]_{L}$
> - $q_{0}=[\varepsilon]_{L}$
> - $F=\{ [x]_{L}|x \in L \}$
> 下面证明它识别语言 $L$：
> 若 $x \in L$，根据 $F$ 的定义有 $[x]_{L} \in F$
> 若 $x \not\in L$，由于对于任意的 $y \in L$，有 $\varepsilon x\not\in L, \varepsilon y\in L$，所以 $x\not\equiv_{L}y$，所以 $[x]_{L} \not\in F$

> [!example] 满足泵引理但不满足Myhill-Nerode定理的例子
> $F=\{ a^ib^jc^k\mid i,j,k\geq 0,若 i=1则j=k \}$

> [!proof]
> 泵引理：$p=2$，取 $x=\varepsilon$ ，若 $a$ 个数为 $2$ 则取 $y=aa$（$xz$也需要在 $F$ 中），反之 $y$ 取第一个字符。
> Myhill-Nerode定理：考虑字符串 $ab,abb,abbb,\cdots$，任意两个字符串都可用 $F$ 区分：对于 $ab^i,ab^j(i\neq j)$，有$ab^ic^i\in F,ab^ic^j\not\in F$