## P

> [!def] P类
> $P$ 是确定型单带图灵机在多项式时间内可判定性的语言类
> $$ \text{P}=\bigcup_{k>0} \text{TIME}(n^k) $$
> TIME:  [[时间复杂性#^586762|时间复杂性类]]

先取定 $k$ 然后对于任意的输入 $w$ 都有复杂度为 $O(n^k)$，而不能根据串$w$ 确定 $k$. e.g. $\cancel{ k=\lvert w \rvert }$

> [!example]
> 上下文无关语言属于 $P$。
> 设 $G=(V,\Sigma,R,S)$ 是产生 CFL $L$ 的[[上下文无关语言#乔姆斯基范式|乔姆斯基范式]] CFG，使用 DP 验证 $w$ 是否由 $G$ 产生
> 设 $\omega=\omega_{1}\omega_{2}\omega_{3}\dots\omega_n$
> 设 $a(i,j)=\{ U\mid U\in V, U \stackrel*\Rightarrow w_{i}w_{i+1}\dots w_{j}\}$
> 边界状态： $a(i,i)$ （长度为 1 的串）
> 状态转移：$U\in a(i,j),V\in a(j+1,k),F\to UV\implies F\in a(i,k)$

> [!def] 验证器
> TM $V$ 是语言 $A$ 的验证器，如果 $A=\{ \omega\mid\text{对某个串}c,V\text{接受}\langle \omega,c \rangle \}$，其中 $c$ 称为“证据”
> 
> ref: [[特殊图灵机#神谕图灵机]]

> [!def] 多项式可验证
> $M\in\text{P}$: $M$ 计算时间是输入长度 $\lvert w \rvert$ 的多项式
> $A$ 是多项式可验证的，当 $\exists k\in \mathbb{N},\exists_{\text{TM}}M,M\in\text{P}$ s.t. $x \in A \Longleftrightarrow \exists c,(\lvert c \rvert\leq \lvert w \rvert^{k})\land M(\langle w,c \rangle)$
> 
> $\leq \lvert w \rvert^k$ 或者 $=\lvert w \rvert^k$都行，等价

注意：这里的 $M(\langle w,c \rangle)$ 计算时间还是关于 $w$ 的多项式，因为 $c$ 是关于 $w$ 的多项式
$\text{Poly}(\lvert w \rvert+\lvert c \rvert)=\text{Poly}(\lvert w \rvert+\lvert w \rvert^k)\in \text{Poly}(\lvert w \rvert)$

> [!example]
> 三染色问题的验证器：
>  V=“对输入 ⟨⟨G⟩, c⟩, 这里 G 是无向图，c是颜色的一个有穷序列:
> 1. 检查 c 中是否只有 3 种不同的颜色，且序列 c 的长度是否等于 G 中结点的个数；
> 2. 使用 c 对 G 的结点着色；
> 3. 对于 G 的每条边，检查它的两个顶点的颜色是否是不同的；
> 4. 若以上检查都通过，则接受；否则，拒绝。”

## NP

> [!def] NP
> NP：具有多项式时间验证器的语言类

> [!example]
> $\text{CLIQUE}=\{ \langle G,k \rangle\mid G是一个包含k团的无向图 \}$

^446e36

> [!def] $\exists^P \circ$
> ref: [[语言类算子]]
> 对于某复杂性语言类 $\Omega$:
> $L\in \exists^P \circ\Omega$ 当且仅当 $\exists c\in \mathbb{N}, V\in\Omega$ 使得
> $x \in L\text{ iff } \exists y\text{ s.t. }\lvert y \rvert\leq\lvert x \rvert^c\land V(x,y)$
> 即：$L(\cdot)=\exists y,\lvert y \rvert\leq \lvert x \rvert^c,V(\cdot,y)$

> [!theorem]
> $\text{NP}=\exists^P\circ P$

名字 NP 来自于 非确定性**Nondeterministic** 多项式时间**Polynomial** 图灵机.

> [!theorem] NP 的第二定义
> 一个语言 A 在NP中，当且仅当它能被某个非确定性多项式时间图灵机接受

> [!proof]
> 与前一个定义的关系：将证据 $c$ 从输入移动到非确定性图灵机内选择
> - 必要性：
> 	因为 $A\in\text{NP}$ 所以存在多项式时间验证器 $V$ 和次数 $k$
> 	对于输入 $w$, $\lvert w \rvert=n$	非确定地选择最长为 $n^k$ 的字符串 $c$，然后运行验证器 $V$
> - 充分性：
> 	将输入证据作为非确定性图灵机 $N$ 的计算地址模拟 $N$，然后若当前运算分支接受则接受
> 	因为 $N$ 的计算时间是关于 $w$ 的多项式，这样的图灵机也是关于 $w$ 的多项式，进而也是关于 $\langle w,c \rangle$ 的多项式

> [!theorem]
> $\text{P}\subseteq\text{NP}$

> [!proof]
> 确定性的多项式图灵机属于非确定性的

> [!theorem]
> $\text{P}$ 关于 并、连接、补运算封闭

> [!proof]
> 并/连接：构造图灵机模拟判断 $L_{1},L_{2}$ 其中 $L_{1},L_{2}\in\text{P}$ 的图灵机即可
> 补：反转接受/拒绝状态

> [!theorem]
> $\text{NP}$ 关于并、连接运算封闭

> [!proof]
> 类似上面的 $P$。
> 为什么不能类似地证明 $\text{co-NP}\in\text{NP}$? 
> 因为反转一个判定 $\langle w,c \rangle, \lvert c \rvert\leq \lvert w \rvert^t$ 的确定性多项式图灵机的状态（连同量词一起反转）会导致复杂度变为指数级（$\exists\to \forall$）因为存在只需要一个计算分支接受就行（或者输入一个证据），但任意需要所有计算分支都不接受（或者判断任意小于 $\lvert w \rvert^t$ 的串 $c$ 都不能是证据），一个计算分支无法知道另一个计算分支的结果，从而无法建立分支，只能在主线程算完所有的串 $c$，而这是指数级的。
> 
> 事实上，$\text{NP}$ 关于补运算是否封闭还是一个学术界未知的问题。
## 规约与 NP-Hard/Complete

> [!def] 多项式时间可计算函数
> $f:\Sigma^*\to\Sigma^*$ 是一个多项式时间可计算函数，如果存在一个多项式时间图灵机 $M$ 对每一个输入 $\omega \in\Sigma^*$ 都接受，停机时带子上是 $f(\omega)$

> [!def] 多项式时间规约
> $A\leq_{p} B$ 如果存在多项式时间可计算函数 $f:\Sigma^*\to\Sigma^*$ 使得对每一个 $\omega \in\Sigma^*$ 有 $\omega \in A \Longleftrightarrow f(\omega)\in B$ 称为 语言 $A$ 多项式时间可[[规约]]到 $B$。 $f$ 称为 $A$ 到 $B$ 的多项式规约

^1d4e2d

> [!theorem]
> $A\leq_{p}B, B\in P\implies A\in P$

^63c469

> [!proof]
> 计算规约 $f$ 然后模拟 $M_{P}$ 即可

> [!def] NP-Hard
> $B$ 是 NP-Hard的，当: $\forall A\in\text{NP},A\leq_{p}B$

> [!def] NP-Complete
> $B$ 是 NP-Complete 的，当：$\forall A\in\text{NP},A\leq_{p}B$ 且有 $B\in\text{NP}$

> [!theorem] 库克定理
> SAT 是 NP 完全的

> [!proof]
> 将 NP 问题 $p$ 规约到 SAT：
> $\forall A\in\text{NP},\exists f_{A}\in\text{FP},\text{ s.t.} \forall \omega,\omega \in A\Longleftrightarrow f_{A}(\omega)\in\text{SAT}$
> 考虑判定 A 的非确定性图灵机 $M$，类似 [[规约#计算历史规约]]，使得 SAT 接受 $f_{A}(\omega)$ 当 $f_{A}$ 的一组赋值是 $M$ 的格局变化历史
> 设 $M$ 计算时间 $n^k$，$k$ 由 $A$ 决定
> 可以构造 $f_{A}$ 使得其计算时间是 $n^{k'}$
> $M$ 接受步数不超过 $n^k$ 步，将这 $n^k$ 条纸带写成一个表格
> ![[SAT-NPC.png]]
> 每次运行最多用到带子的 $n^k+1$ 个格子
> 可以表示为 $(n^k+1)\times(n^k+4)$ 的表格
> $$ \varphi=\varphi_{\text{cell}}\land\varphi_{\text{start}}\land\varphi_{\text{accept}}\land\varphi_{\text{move}} $$
> - $\varphi_{\text{cell}}$：每一个格子恰好一符号
> - $\varphi_{\text{start}}$：第一行是起始格局
> - $\varphi_{\text{accept}}$：最后一行是接受格局
> - $\varphi_{\text{move}}$：后一行格局由前一行产生
> $\varphi_{\text{move}}$ 由一系列 $\varphi_{\text{window}}$ 组成，$\varphi_{\text{window}}$ 是6元组，表示相邻3个格子如何转换为下一格局中的3格子

> [!theorem]
> 3-SAT 是 NP 完全的

> [!proof]
> 将 SAT 规约到 3-SAT
> ![[CNFto3SAT.png]]
## EXP

$$\text{EXP}=\bigcup_{k>0}\text{TIME}(2^{n^k})$$
> [!theorem]
> $\text{NP}\in\text{EXP}$

> [!theorem]
> $\text{P}=\text{NP}$，则 $\text{EXP}=\text{NEXP}$

> [!proof]
> 增加 $L$ 输入长度，padding到指数级 $L'$，然后通过 $\text{P}=\text{NP}$ 说明存在确定性多项式算法判定 $L'$，然后转换回 $L$，变成确定性指数图灵机
